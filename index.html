<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Magical Love Letter</title>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
body {
    margin:0; padding:0;
    font-family:'Poppins',sans-serif;
    background: url('https://images.unsplash.com/photo-1517816743773-6e0fd518b4a6?fit=crop&w=1950&q=80') no-repeat center center fixed;
    background-size: cover;
    overflow: hidden;
    display:flex; justify-content:center; align-items:center; height:100vh; color:#fff;
}
.petal {
    position: absolute; width:15px; height:15px;
    background:pink; border-radius:50%; opacity:0.8; animation:fall linear forwards;
}
@keyframes fall {
    0%{transform:translateY(-50px) rotate(0deg);opacity:0.8;}
    100%{transform:translateY(100vh) rotate(360deg);opacity:0;}
}
.envelope-container{perspective:1000px;width:320px;height:220px;position:relative; z-index:10;}
.flap{
    width:100%; height:100%; background:#ff6b81; border-radius:12px; position:absolute;
    top:0; left:0; transform-origin: top; display:flex; justify-content:center; align-items:center;
    font-size:18px; font-weight:600; text-align:center; cursor:pointer; z-index:2; transition:transform 1s ease;
    box-shadow:0 5px 15px rgba(0,0,0,0.3);
}
.letter{
    width:100%; height:100%; background:#fff; color:#000; padding:20px; box-sizing:border-box;
    border-radius:12px; position:absolute; top:0; left:0; opacity:0; transition:opacity 0.8s ease 1s;
    font-family:'Poppins',sans-serif; overflow:hidden; z-index:1;
}
.message{font-size:16px; line-height:1.5; white-space:pre-wrap;}
.glow{color:#ff2d95; text-shadow:0 0 5px #ff2d95,0 0 10px #ff2d95,0 0 20px #ff2d95;}
.buttons{margin-top:15px; text-align:center;}
button{padding:8px 18px; margin:5px; border:none; border-radius:8px; cursor:pointer; font-size:14px; font-weight:600; transition:0.3s;}
button.yes{background:#ff6b81;color:#fff;} button.no{background:#576574;color:#fff;} button:hover{opacity:0.8;}
.heart{position:absolute;width:15px;height:15px;background:red;transform:rotate(45deg);animation:floatUp 3s linear forwards;opacity:0.8;}
.heart::before,.heart::after{content:''; position:absolute; width:15px; height:15px; background:red; border-radius:50%;}
.heart::before{top:-7.5px; left:0;} .heart::after{left:7.5px; top:0;}
@keyframes floatUp{0%{transform:translateY(0) rotate(45deg);opacity:0.8;}100%{transform:translateY(-200px) rotate(45deg);opacity:0;}}
</style>
</head>
<body>

<audio id="romanticAudio" src="https://www.bensound.com/bensound-music/bensound-romantic.mp3"></audio>

<div class="envelope-container" id="envelopeContainer">
    <div class="flap" id="flap">📬 Click to Open</div>
    <div class="letter" id="letter">
        <div class="message" id="message"></div>
        <div class="buttons" id="buttons" style="display:none;">
            <button class="yes" id="yesBtn">Yes</button>
            <button class="no" id="noBtn">No</button>
        </div>
    </div>
</div>

<script>
const flap = document.getElementById('flap');
const letter = document.getElementById('letter');
const buttons = document.getElementById('buttons');
const yesBtn = document.getElementById('yesBtn');
const noBtn = document.getElementById('noBtn');
const audio = document.getElementById('romanticAudio');
const message = document.getElementById('message');

function typeMessage(text,duration=2000,callback=null,glow=false){
    message.innerHTML=''; let i=0;
    let intervalTime=duration/text.length;
    const interval=setInterval(()=>{
        if(i<text.length){message.innerHTML+=text.charAt(i); i++;}
        else{clearInterval(interval); if(glow) message.classList.add('glow'); if(callback) callback();}
    },intervalTime);
}

function createHearts(){
    for(let i=0;i<25;i++){
        const heart=document.createElement('div'); heart.classList.add('heart');
        heart.style.left=Math.random()*window.innerWidth+'px';
        heart.style.animationDuration=(2+Math.random()*2)+'s';
        document.body.appendChild(heart);
        setTimeout(()=>document.body.removeChild(heart),3000);
    }
}

function createPetals(){
    for(let i=0;i<30;i++){
        const petal=document.createElement('div'); petal.classList.add('petal');
        petal.style.left=Math.random()*window.innerWidth+'px';
        petal.style.width=(5+Math.random()*10)+'px'; petal.style.height=(5+Math.random()*10)+'px';
        petal.style.animationDuration=(4+Math.random()*3)+'s';
        document.body.appendChild(petal);
        setTimeout(()=>document.body.removeChild(petal),7000);
    }
}

function openEnvelope(){
    flap.style.transform='rotateX(-180deg)';
    letter.style.opacity=1;
    audio.play();
    typeMessage("Someone loves you so deeply. You want to know who?",2000,()=>{
        buttons.style.display='block';
    });
    createPetals();
}

flap.addEventListener('click', openEnvelope);
document.body.addEventListener('click',(e)=>{if(e.target===document.body) openEnvelope();});

yesBtn.addEventListener('click',()=>{
    buttons.style.display='none';
    typeMessage("I have written a shayari for you. Wanna know?",2000,()=>{
        yesBtn.innerText="Show Shayari";
        yesBtn.style.display='inline-block';
        yesBtn.onclick=()=>{
            const shayari=`तेरी मुस्कान से खिलती है हर सुबह मेरी,\nतेरी खूबसूरती ने चुरा ली है नींदें मेरी।\nकैसे करूँ तारीफ तेरी मासूमियत की,\nतू तो खुद ही एक कविता है, निकु।`;
            typeMessage(shayari,30000,()=>{
                createHearts(); createPetals();
            },true);
            yesBtn.style.display='none';
        }
    });
});

noBtn.addEventListener('click',()=>{buttons.style.display='none'; typeMessage("Okay, maybe next time. 😊",2000);});
</script>

</body>
</html>
